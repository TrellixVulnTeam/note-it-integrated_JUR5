{"ast":null,"code":"import _asyncToGenerator from \"/home/nehakothari/Desktop/Note-it-integrated/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/rest-api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../navbar/navbar.component\";\nimport * as i4 from \"@angular/common\";\n\nfunction CartComponent_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"th\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelementStart(8, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function CartComponent_tr_16_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.deleteFromCart(item_r1.chapterId);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(9, \"svg\", 21);\n    i0.ɵɵelement(10, \"path\", 22);\n    i0.ɵɵelement(11, \"path\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.bookName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.chapterName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.chapterNumber);\n  }\n}\n\nexport class CartComponent {\n  constructor(_api, router) {\n    this._api = _api;\n    this.router = router;\n    this.merge = false;\n  }\n\n  ngOnInit() {\n    this.local_cart = JSON.parse(localStorage.cart);\n\n    if (this.local_cart.length != 0) {\n      this.merge = true;\n      console.log(this.local_cart.length);\n    }\n  }\n\n  deleteFromCart(id) {\n    console.log(id); // remove from array local_Cart\n\n    console.log(\"before\", this.local_cart); // get index of object with id of 37\n\n    const removeIndex = this.local_cart.findIndex(item => item.chapterId === id); // remove object\n\n    this.local_cart.splice(removeIndex, 1);\n    console.log(\"After\", this.local_cart); // Update the localstorage\n\n    localStorage.setItem('cart', JSON.stringify(this.local_cart));\n  }\n\n  sendCartToBackend() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let obj = {}; // collect custom name:\n\n      let customName = document.getElementById(\"customName\");\n      obj.custom_name = customName.value;\n      let arr = [];\n\n      for (let i = 0; i < _this.local_cart.length; i++) {\n        console.log(_this.local_cart[i], \"kasjljlskdfjsldfjk\");\n        arr.push(_this.local_cart[i].chapterId);\n      }\n\n      obj.selected_chapters = arr; // Send this to the backend. \n\n      let response = yield _this._api.push_cart_to_backend(obj);\n      console.log(\"END OF THE ERRA\", response);\n      let blob = new Blob([response], {\n        type: 'application/pdf'\n      });\n      let downloadURL = window.URL.createObjectURL(response);\n      let link = document.createElement('a');\n      link.href = downloadURL;\n      link.download = `${customName.value}.pdf`;\n      link.click(); //After the post\n\n      _this.local_cart = [];\n      localStorage.setItem('cart', JSON.stringify(_this.local_cart)); // empty the input\n\n      _this.router.navigate(['home']);\n    })();\n  }\n\n}\n\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.RestApiService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 36,\n  vars: 2,\n  consts: [[1, \"container\", 2, \"max-width\", \"70vw\"], [1, \"row\", \"mt-4\"], [1, \"table\", \"mt-4\", \"source-sans-pro\", 2, \"border\", \"1px solid\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#cartModal\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"id\", \"cartModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"aria-label\", \"Sizing example input\", \"aria-describedby\", \"inputGroup-sizing-default\", \"placeholder\", \"My custom book\", \"id\", \"customName\", 1, \"form-control\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"scope\", \"row\"], [1, \"btn\", \"btn-outline-light\", 2, \"color\", \"black\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-trash\"], [\"d\", \"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"], [\"fill-rule\", \"evenodd\", \"d\", \"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-navbar\");\n      i0.ɵɵelementStart(1, \"div\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵelementStart(3, \"h2\");\n      i0.ɵɵtext(4, \"Reading List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"table\", 2);\n      i0.ɵɵelementStart(6, \"thead\");\n      i0.ɵɵelementStart(7, \"tr\");\n      i0.ɵɵelementStart(8, \"th\", 3);\n      i0.ɵɵtext(9, \"Book Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\", 3);\n      i0.ɵɵtext(11, \"Chapter Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\", 3);\n      i0.ɵɵtext(13, \"Chapter Number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"th\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"tbody\");\n      i0.ɵɵtemplate(16, CartComponent_tr_16_Template, 12, 3, \"tr\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 5);\n      i0.ɵɵelementStart(18, \"div\");\n      i0.ɵɵelementStart(19, \"button\", 6);\n      i0.ɵɵtext(20, \"Merge\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 7);\n      i0.ɵɵelementStart(22, \"div\", 8);\n      i0.ɵɵelementStart(23, \"div\", 9);\n      i0.ɵɵelementStart(24, \"div\", 10);\n      i0.ɵɵelementStart(25, \"h5\", 11);\n      i0.ɵɵtext(26, \"Enter Book Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"button\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 13);\n      i0.ɵɵelementStart(29, \"div\", 14);\n      i0.ɵɵelement(30, \"input\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 16);\n      i0.ɵɵelementStart(32, \"button\", 17);\n      i0.ɵɵtext(33, \"Close\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function CartComponent_Template_button_click_34_listener() {\n        return ctx.sendCartToBackend();\n      });\n      i0.ɵɵtext(35, \"Save changes\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngForOf\", ctx.local_cart);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.merge);\n    }\n  },\n  directives: [i3.NavbarComponent, i4.NgForOf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjYXJ0LmNvbXBvbmVudC5zY3NzIn0= */\"]\n});","map":{"version":3,"sources":["/home/nehakothari/Desktop/Note-it-integrated/Frontend/src/app/components/cart/cart.component.ts","/home/nehakothari/Desktop/Note-it-integrated/Frontend/src/app/components/cart/cart.component.html"],"names":[],"mappings":";;;;;;;;;;;ACiBU,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA;AACE,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA,EAAA,EAAA;AAAgB,IAAA,EAAA,CAAA,MAAA,CAAA,CAAA;AAAiB,IAAA,EAAA,CAAA,YAAA;AACjC,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA;AAAI,IAAA,EAAA,CAAA,MAAA,CAAA,CAAA;AAAoB,IAAA,EAAA,CAAA,YAAA;AACxB,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA;AAAI,IAAA,EAAA,CAAA,MAAA,CAAA,CAAA;AAAsB,IAAA,EAAA,CAAA,YAAA;AAC1B,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA;AACI,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,QAAA,EAAA,EAAA;AAA4D,IAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,oDAAA,GAAA;AAAA,YAAA,WAAA,GAAA,EAAA,CAAA,aAAA,CAAA,GAAA,CAAA;AAAA,YAAA,OAAA,GAAA,WAAA,CAAA,SAAA;AAAA,YAAA,MAAA,GAAA,EAAA,CAAA,aAAA,EAAA;AAAA,aAAA,MAAA,CAAA,cAAA,CAAA,OAAA,CAAA,SAAA,CAAA;AAAA,KAAA;AACxD,IAAA,EAAA,CAAA,cAAA;AAAA,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACI,IAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,MAAA,EAAA,EAAA;AACA,IAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,MAAA,EAAA,EAAA;AACF,IAAA,EAAA,CAAA,YAAA;AACN,IAAA,EAAA,CAAA,YAAA;AACJ,IAAA,EAAA,CAAA,YAAA;AACF,IAAA,EAAA,CAAA,YAAA;;;;;AAXkB,IAAA,EAAA,CAAA,SAAA,CAAA,CAAA;AAAA,IAAA,EAAA,CAAA,iBAAA,CAAA,OAAA,CAAA,QAAA;AACZ,IAAA,EAAA,CAAA,SAAA,CAAA,CAAA;AAAA,IAAA,EAAA,CAAA,iBAAA,CAAA,OAAA,CAAA,WAAA;AACA,IAAA,EAAA,CAAA,SAAA,CAAA,CAAA;AAAA,IAAA,EAAA,CAAA,iBAAA,CAAA,OAAA,CAAA,aAAA;;;;ADXhB,OAAM,MAAO,aAAP,CAAoB;AAExB,EAAA,WAAA,CAAoB,IAApB,EAAgD,MAAhD,EAA8D;AAA1C,SAAA,IAAA,GAAA,IAAA;AAA4B,SAAA,MAAA,GAAA,MAAA;AAEhD,SAAA,KAAA,GAAgB,KAAhB;AAFmE;;AAInE,EAAA,QAAQ,GAAA;AACN,SAAK,UAAL,GAAkB,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,IAAxB,CAAlB;;AACA,QAAG,KAAK,UAAL,CAAgB,MAAhB,IAA0B,CAA7B,EAA+B;AAC7B,WAAK,KAAL,GAAa,IAAb;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,UAAL,CAAgB,MAA5B;AACD;AACF;;AAED,EAAA,cAAc,CAAC,EAAD,EAAO;AACnB,IAAA,OAAO,CAAC,GAAR,CAAY,EAAZ,EADmB,CAEnB;;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAqB,KAAK,UAA1B,EAHmB,CAKnB;;AACA,UAAM,WAAW,GAAG,KAAK,UAAL,CAAgB,SAAhB,CAA4B,IAAD,IAAc,IAAI,CAAC,SAAL,KAAmB,EAA5D,CAApB,CANmB,CAOnB;;AACA,SAAK,UAAL,CAAgB,MAAhB,CAAwB,WAAxB,EAAqC,CAArC;AAEA,IAAA,OAAO,CAAC,GAAR,CAAY,OAAZ,EAAoB,KAAK,UAAzB,EAVmB,CAYnB;;AACA,IAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAAI,CAAC,SAAL,CAAe,KAAK,UAApB,CAA7B;AACD;;AAEK,EAAA,iBAAiB,GAAA;AAAA;;AAAA;AAErB,UAAI,GAAG,GAAO,EAAd,CAFqB,CAGrB;;AACA,UAAI,UAAU,GAAO,QAAQ,CAAC,cAAT,CAAwB,YAAxB,CAArB;AACA,MAAA,GAAG,CAAC,WAAJ,GAAkB,UAAU,CAAC,KAA7B;AAEA,UAAI,GAAG,GAAG,EAAV;;AACA,WAAI,IAAI,CAAC,GAAC,CAAV,EAAY,CAAC,GAAC,KAAI,CAAC,UAAL,CAAgB,MAA9B,EAAqC,CAAC,EAAtC,EAAyC;AACvC,QAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,UAAL,CAAgB,CAAhB,CAAZ,EAAgC,oBAAhC;AACE,QAAA,GAAG,CAAC,IAAJ,CAAS,KAAI,CAAC,UAAL,CAAgB,CAAhB,EAAmB,SAA5B;AACH;;AAED,MAAA,GAAG,CAAC,iBAAJ,GAAwB,GAAxB,CAbqB,CAerB;;AACA,UAAI,QAAQ,SAAa,KAAI,CAAC,IAAL,CAAU,oBAAV,CAA+B,GAA/B,CAAzB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,iBAAZ,EAA8B,QAA9B;AAEA,UAAI,IAAI,GAAG,IAAI,IAAJ,CAAS,CAAC,QAAD,CAAT,EAAqB;AAAC,QAAA,IAAI,EAAE;AAAP,OAArB,CAAX;AACA,UAAI,WAAW,GAAG,MAAM,CAAC,GAAP,CAAW,eAAX,CAA2B,QAA3B,CAAlB;AACA,UAAI,IAAI,GAAO,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAf;AACA,MAAA,IAAI,CAAC,IAAL,GAAY,WAAZ;AACA,MAAA,IAAI,CAAC,QAAL,GAAgB,GAAG,UAAU,CAAC,KAAK,MAAnC;AACA,MAAA,IAAI,CAAC,KAAL,GAxBqB,CA2BrB;;AACA,MAAA,KAAI,CAAC,UAAL,GAAkB,EAAlB;AACA,MAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAAI,CAAC,SAAL,CAAe,KAAI,CAAC,UAApB,CAA7B,EA7BqB,CA+BrB;;AACA,MAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,CAAC,MAAD,CAArB;AAhCqB;AAkCtB;;AAhEuB;;;mBAAb,a,EAAa,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,cAAA,C,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,MAAA,C;AAAA,C;;;QAAb,a;AAAa,EAAA,SAAA,EAAA,CAAA,CAAA,UAAA,CAAA,C;AAAA,EAAA,KAAA,EAAA,E;AAAA,EAAA,IAAA,EAAA,C;AAAA,EAAA,MAAA,EAAA,CAAA,CAAA,CAAA,EAAA,WAAA,EAAA,CAAA,EAAA,WAAA,EAAA,MAAA,CAAA,EAAA,CAAA,CAAA,EAAA,KAAA,EAAA,MAAA,CAAA,EAAA,CAAA,CAAA,EAAA,OAAA,EAAA,MAAA,EAAA,iBAAA,EAAA,CAAA,EAAA,QAAA,EAAA,WAAA,CAAA,EAAA,CAAA,OAAA,EAAA,KAAA,CAAA,EAAA,CAAA,CAAA,EAAA,OAAA,EAAA,SAAA,CAAA,EAAA,CAAA,CAAA,EAAA,KAAA,CAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,gBAAA,EAAA,OAAA,EAAA,gBAAA,EAAA,YAAA,EAAA,CAAA,EAAA,KAAA,EAAA,aAAA,EAAA,CAAA,EAAA,UAAA,CAAA,EAAA,CAAA,IAAA,EAAA,WAAA,EAAA,UAAA,EAAA,IAAA,EAAA,iBAAA,EAAA,mBAAA,EAAA,aAAA,EAAA,MAAA,EAAA,CAAA,EAAA,OAAA,EAAA,MAAA,CAAA,EAAA,CAAA,CAAA,EAAA,cAAA,CAAA,EAAA,CAAA,CAAA,EAAA,eAAA,CAAA,EAAA,CAAA,CAAA,EAAA,cAAA,CAAA,EAAA,CAAA,IAAA,EAAA,mBAAA,EAAA,CAAA,EAAA,aAAA,CAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,OAAA,EAAA,YAAA,EAAA,OAAA,EAAA,CAAA,EAAA,WAAA,CAAA,EAAA,CAAA,CAAA,EAAA,YAAA,CAAA,EAAA,CAAA,CAAA,EAAA,aAAA,EAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,YAAA,EAAA,sBAAA,EAAA,kBAAA,EAAA,2BAAA,EAAA,aAAA,EAAA,gBAAA,EAAA,IAAA,EAAA,YAAA,EAAA,CAAA,EAAA,cAAA,CAAA,EAAA,CAAA,CAAA,EAAA,cAAA,CAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,OAAA,EAAA,CAAA,EAAA,KAAA,EAAA,eAAA,CAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,OAAA,EAAA,CAAA,EAAA,KAAA,EAAA,aAAA,EAAA,CAAA,EAAA,OAAA,CAAA,EAAA,CAAA,OAAA,EAAA,KAAA,CAAA,EAAA,CAAA,CAAA,EAAA,KAAA,EAAA,mBAAA,EAAA,CAAA,EAAA,OAAA,EAAA,OAAA,EAAA,CAAA,EAAA,OAAA,CAAA,EAAA,CAAA,OAAA,EAAA,4BAAA,EAAA,OAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,cAAA,EAAA,SAAA,EAAA,WAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,CAAA,EAAA,CAAA,GAAA,EAAA,iKAAA,CAAA,EAAA,CAAA,WAAA,EAAA,SAAA,EAAA,GAAA,EAAA,4OAAA,CAAA,C;AAAA,EAAA,QAAA,EAAA,SAAA,sBAAA,CAAA,EAAA,EAAA,GAAA,EAAA;AAAA,QAAA,EAAA,GAAA,CAAA,EAAA;ACT1B,MAAA,EAAA,CAAA,SAAA,CAAA,CAAA,EAAA,YAAA;AAEA,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA;AACI,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA;AACI,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA;AAAI,MAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,cAAA;AAAY,MAAA,EAAA,CAAA,YAAA;AACpB,MAAA,EAAA,CAAA,YAAA;AAEA,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA,EAAA,CAAA;AACI,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,IAAA,EAAA,CAAA;AAAgB,MAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,WAAA;AAAS,MAAA,EAAA,CAAA,YAAA;AACzB,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,IAAA,EAAA,CAAA;AAAgB,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,cAAA;AAAY,MAAA,EAAA,CAAA,YAAA;AAC5B,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,IAAA,EAAA,CAAA;AAAgB,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,gBAAA;AAAc,MAAA,EAAA,CAAA,YAAA;AAC9B,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,IAAA,EAAA,CAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACA,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,OAAA;AACE,MAAA,EAAA,CAAA,UAAA,CAAA,EAAA,EAAA,4BAAA,EAAA,EAAA,EAAA,CAAA,EAAA,IAAA,EAAA,CAAA;AAcF,MAAA,EAAA,CAAA,YAAA;AACF,MAAA,EAAA,CAAA,YAAA;AAEA,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA;AACI,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA;AAAqH,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,OAAA;AAAK,MAAA,EAAA,CAAA,YAAA;AAC5H,MAAA,EAAA,CAAA,YAAA;AACJ,MAAA,EAAA,CAAA,YAAA;AACN,MAAA,EAAA,CAAA,YAAA;AAGA,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,CAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA;AAA+C,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,iBAAA;AAAe,MAAA,EAAA,CAAA,YAAA;AAC9D,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,QAAA,EAAA,EAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACA,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA;AACE,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,OAAA,EAAA,EAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACA,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,EAAA,EAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,QAAA,EAAA,EAAA;AAAwE,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,OAAA;AAAK,MAAA,EAAA,CAAA,YAAA;AAC7E,MAAA,EAAA,CAAA,cAAA,CAAA,EAAA,EAAA,QAAA,EAAA,EAAA;AAAsE,MAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,+CAAA,GAAA;AAAA,eAAS,GAAA,CAAA,iBAAA,EAAT;AAA4B,OAA5B;AAA8B,MAAA,EAAA,CAAA,MAAA,CAAA,EAAA,EAAA,cAAA;AAAY,MAAA,EAAA,CAAA,YAAA;AAClH,MAAA,EAAA,CAAA,YAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACF,MAAA,EAAA,CAAA,YAAA;AACF,MAAA,EAAA,CAAA,YAAA;;;;AA3C+B,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA;AAAA,MAAA,EAAA,CAAA,UAAA,CAAA,SAAA,EAAA,GAAA,CAAA,UAAA;AAmB2B,MAAA,EAAA,CAAA,SAAA,CAAA,CAAA;AAAA,MAAA,EAAA,CAAA,UAAA,CAAA,UAAA,EAAA,CAAA,GAAA,CAAA,KAAA","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { RestApiService } from 'src/app/services/rest-api.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss']\n})\nexport class CartComponent implements OnInit {\n\n  constructor(private _api:RestApiService, public router: Router) { }\n  local_cart: any;\n  merge:boolean = false;\n\n  ngOnInit(): void {\n    this.local_cart = JSON.parse(localStorage.cart);\n    if(this.local_cart.length != 0){\n      this.merge = true;\n      console.log(this.local_cart.length);\n    }\n  }\n\n  deleteFromCart(id:any){\n    console.log(id);\n    // remove from array local_Cart\n    console.log(\"before\",this.local_cart);\n\n    // get index of object with id of 37\n    const removeIndex = this.local_cart.findIndex( (item:any) => item.chapterId === id );\n    // remove object\n    this.local_cart.splice( removeIndex, 1 );\n\n    console.log(\"After\",this.local_cart);\n    \n    // Update the localstorage\n    localStorage.setItem('cart', JSON.stringify(this.local_cart));\n  }\n\n  async sendCartToBackend(){\n\n    let obj:any = {}\n    // collect custom name:\n    let customName:any = document.getElementById(\"customName\");\n    obj.custom_name = customName.value\n\n    let arr = []\n    for(let i=0;i<this.local_cart.length;i++){\n      console.log(this.local_cart[i], \"kasjljlskdfjsldfjk\");\n        arr.push(this.local_cart[i].chapterId)\n    }\n\n    obj.selected_chapters = arr;\n\n    // Send this to the backend. \n    let response:any = await this._api.push_cart_to_backend(obj);\n    console.log(\"END OF THE ERRA\",response);\n\n    let blob = new Blob([response], {type: 'application/pdf'});\n    let downloadURL = window.URL.createObjectURL(response);\n    let link:any = document.createElement('a');\n    link.href = downloadURL;\n    link.download = `${customName.value}.pdf`;\n    link.click();\n    \n\n    //After the post\n    this.local_cart = [];\n    localStorage.setItem('cart', JSON.stringify(this.local_cart));\n\n    // empty the input\n    this.router.navigate(['home']);\n    \n  }\n\n}\n","<app-navbar></app-navbar>\n\n<div class=\"container\" style=\"max-width: 70vw;\">\n    <div class=\"row mt-4\">\n        <h2>Reading List</h2>\n    </div>\n    \n    <table class=\"table mt-4 source-sans-pro\" style=\"border: 1px solid;\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Book Name</th>\n            <th scope=\"col\">Chapter Name</th>\n            <th scope=\"col\">Chapter Number</th>\n            <th scope=\"col\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of local_cart\">\n            <th scope=\"row\">{{item.bookName}}</th>\n            <td>{{item.chapterName}}</td>\n            <td>{{item.chapterNumber}}</td>\n            <td>\n                <button class=\"btn btn-outline-light\" style=\"color: black;\" (click)=\"deleteFromCart(item.chapterId)\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\n                        <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                        <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                      </svg>\n                </button>\n            </td>\n          </tr>\n\n        </tbody>\n      </table>\n\n      <div class=\"row\">\n          <div>\n            <button class=\"btn btn-primary\" type=\"button\" [disabled]='!merge' data-bs-toggle=\"modal\" data-bs-target=\"#cartModal\">Merge</button>\n          </div>\n      </div>\n</div>\n\n<!-- Modal -->\n<div class=\"modal fade\" id=\"cartModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Enter Book Name</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"input-group mb-3\">\n          <input type=\"text\" class=\"form-control\" aria-label=\"Sizing example input\" aria-describedby=\"inputGroup-sizing-default\" placeholder=\"My custom book\" id=\"customName\">\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" (click)=\"sendCartToBackend()\">Save changes</button>\n      </div>\n    </div>\n  </div>\n</div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}